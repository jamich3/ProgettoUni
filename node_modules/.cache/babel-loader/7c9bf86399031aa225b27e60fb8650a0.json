{"remainingRequest":"C:\\Users\\Utente\\Documents\\Università\\INFO2\\ProgettoInfo2\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Utente\\Documents\\Università\\INFO2\\ProgettoInfo2\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\Utente\\Documents\\Università\\INFO2\\ProgettoInfo2\\src\\dataservice.js","dependencies":[{"path":"C:\\Users\\Utente\\Documents\\Università\\INFO2\\ProgettoInfo2\\src\\dataservice.js","mtime":1643057164953},{"path":"C:\\Users\\Utente\\Documents\\Università\\INFO2\\ProgettoInfo2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641768647009},{"path":"C:\\Users\\Utente\\Documents\\Università\\INFO2\\ProgettoInfo2\\node_modules\\babel-loader\\lib\\index.js","mtime":1641768664865},{"path":"C:\\Users\\Utente\\Documents\\Università\\INFO2\\ProgettoInfo2\\node_modules\\eslint-loader\\index.js","mtime":1641768650585}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gIkBmaXJlYmFzZS9hcHAiOwppbXBvcnQgIkBmaXJlYmFzZS9maXJlc3RvcmUiOyAvLyBGaXJlYmFzZSBhbmNvcmEgbm9uIHV0aWxpenphdG8KCmZpcmViYXNlLmluaXRpYWxpemVBcHAoewogIGFwaUtleTogIkFJemFTeUNZWERLLThmRGRBNVBGbVBKMkxhSWFJc1NCdFV2NW1xbyIsCiAgYXV0aERvbWFpbjogInN3cHJvamVjdC02NTU2Ni5maXJlYmFzZWFwcC5jb20iLAogIHByb2plY3RJZDogInN3cHJvamVjdC02NTU2NiIsCiAgc3RvcmFnZUJ1Y2tldDogInN3cHJvamVjdC02NTU2Ni5hcHBzcG90LmNvbSIsCiAgbWVzc2FnaW5nU2VuZGVySWQ6ICIzMzcxNTA0OTQ5MzAiLAogIGFwcElkOiAiMTozMzcxNTA0OTQ5MzA6d2ViOjk5ODNjYzI1NmJhOTJmNGNmODA1MGIiLAogIG1lYXN1cmVtZW50SWQ6ICJHLUhURThKMFcwWDciCn0pOwp2YXIgZGIgPSBmaXJlYmFzZS5maXJlc3RvcmUoKTsKZXhwb3J0IGRlZmF1bHQgewogIC8vTG9naW4gdGhpbmdzIC0tLS0tLS0tLS0tLQogIGlzQXV0aGVudGljYXRlZDogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuICEhbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJuYW1lIik7CiAgfSwKICBsb2dpbjogZnVuY3Rpb24gKHVzZXJuYW1lKSB7CiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgidXNlcm5hbWUiLCB1c2VybmFtZSk7CiAgfSwKICBsb2dvdXQ6IGZ1bmN0aW9uICgpIHsKICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCJ1c2VybmFtZSIpOwogIH0sCiAgLy8gTm9uIG1pIGxlZ2dlIGlsIHB2YWx1ZSAtLT4gaW4gTElTVCwgbmVsbGEgcGFnaW5hemlvbmUKICBnZXRQZW9wbGU6IGZ1bmN0aW9uIChwYWdlKSB7CiAgICByZXR1cm4gYXhpb3MuZ2V0KCJodHRwczovL3N3YXBpLmRldi9hcGkvcGVvcGxlLz9wYWdlPSIgKyBwYWdlKTsKICB9LAogIC8vIFFVRVNUTyBGVU5aSU9OQQogIGdldFBlcnNvbjogZnVuY3Rpb24gKGlkKSB7CiAgICByZXR1cm4gYXhpb3MuZ2V0KCJodHRwczovL3N3YXBpLmRldi9hcGkvcGVvcGxlLyIgKyBpZCArICIvIik7CiAgfSwKICAvLyBTZWFyY2ggbm9uIGZ1bnppb25hIC0gcXVlc3RvIMOoIGNvcGlhdG8gZGFsIHByb2dldHRvIGRlaSBwcm9mCiAgc2VhcmNoUGVyc29uOiBmdW5jdGlvbiAodGVybSkgewogICAgaWYgKCF0ZXJtIHx8IHRlcm0ubGVuZ3RoIDwgMykgewogICAgICByZXR1cm4gbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7CiAgICAgICAgcmVzb2x2ZShbXSk7CiAgICAgIH0pOwogICAgfQogIH0sCiAgLy9SYXRpbmcgc3RhcnMgcGVyIHBlcnNvbmFnZ2kKICB2b3RlOiBmdW5jdGlvbiAoaWQsIHZhbHVlKSB7CiAgICByZXR1cm4gZGIuY29sbGVjdGlvbigidm90aSIpLmRvYygpLnNldCh7CiAgICAgIHZvdG86IHZhbHVlLAogICAgICBwZXJzb246IGlkLAogICAgICB1c2VybmFtZTogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJuYW1lIikKICAgIH0pOwogIH0sCiAgZ2V0U3RhdHM6IGZ1bmN0aW9uIChpZCkgewogICAgcmV0dXJuIGRiLmNvbGxlY3Rpb24oInZvdGkiKS53aGVyZSgiaWRfcGVyc29uIiwgIj09IiwgaWQpLmdldCgpLnRoZW4oZGF0YSA9PiB7CiAgICAgIGxldCBzdW0gPSAwOwogICAgICBsZXQgdXNlclZvdGUgPSBudWxsOwogICAgICBsZXQgdXNlcm5hbWUgPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcm5hbWUiKTsKICAgICAgZGF0YS5mb3JFYWNoKGRvYyA9PiB7CiAgICAgICAgc3VtICs9IGRvYy5kYXRhKCkudm90bzsKCiAgICAgICAgaWYgKGRvYy5kYXRhKCkudXNlcm5hbWUgPT09IHVzZXJuYW1lKSB7CiAgICAgICAgICB1c2VyVm90ZSA9IGRvYy5kYXRhKCkudm90bzsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gewogICAgICAgIHRvdGFsQ291bnQ6IGRhdGEuc2l6ZSwKICAgICAgICB1c2VyVm90ZTogdXNlclZvdGUsCiAgICAgICAgYXZlcmFnZTogZGF0YS5zaXplID09PSAwID8gMyA6IHN1bSAvIGRhdGEuc2l6ZQogICAgICB9OwogICAgfSk7CiAgfQp9Ow=="},{"version":3,"sources":["C:/Users/Utente/Documents/Università/INFO2/ProgettoInfo2/src/dataservice.js"],"names":["axios","firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","firestore","isAuthenticated","localStorage","getItem","login","username","setItem","logout","removeItem","getPeople","page","get","getPerson","id","searchPerson","term","length","Promise","resolve","vote","value","collection","doc","set","voto","person","getStats","where","then","data","sum","userVote","forEach","totalCount","size","average"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport firebase from \"@firebase/app\";\r\nimport \"@firebase/firestore\";\r\n\r\n// Firebase ancora non utilizzato\r\nfirebase.initializeApp({\r\n  apiKey: \"AIzaSyCYXDK-8fDdA5PFmPJ2LaIaIsSBtUv5mqo\",\r\n  authDomain: \"swproject-65566.firebaseapp.com\",\r\n  projectId: \"swproject-65566\",\r\n  storageBucket: \"swproject-65566.appspot.com\",\r\n  messagingSenderId: \"337150494930\",\r\n  appId: \"1:337150494930:web:9983cc256ba92f4cf8050b\",\r\n  measurementId: \"G-HTE8J0W0X7\"\r\n});\r\n\r\nvar db = firebase.firestore();\r\n\r\n  export default {\r\n//Login things ------------\r\n    isAuthenticated: function () {\r\n      return !!localStorage.getItem(\"username\");\r\n    },\r\n    login: function (username) {\r\n      localStorage.setItem(\"username\", username);\r\n    },\r\n    logout: function () {\r\n      localStorage.removeItem(\"username\");\r\n    },\r\n// Non mi legge il pvalue --> in LIST, nella paginazione\r\n    getPeople: function (page) {\r\n      return axios.get(\"https://swapi.dev/api/people/?page=\" + page);\r\n    },\r\n// QUESTO FUNZIONA\r\n    getPerson: function (id) {\r\n      return axios.get(\"https://swapi.dev/api/people/\" + id + \"/\");\r\n    },\r\n// Search non funziona - questo è copiato dal progetto dei prof\r\n    searchPerson: function (term) {\r\n    if (!term || term.length < 3) {\r\n      return new Promise((resolve) => {\r\n        resolve([]);\r\n      });\r\n    }\r\n    },\r\n//Rating stars per personaggi\r\n  vote: function (id, value) {\r\n    return db\r\n      .collection(\"voti\")\r\n      .doc()\r\n      .set({\r\n        voto: value,\r\n        person: id,\r\n        username: localStorage.getItem(\"username\")\r\n      });\r\n  },\r\n  getStats: function (id) {\r\n    return db\r\n      .collection(\"voti\")\r\n      .where(\"id_person\", \"==\", id)\r\n      .get()\r\n      .then((data) => {\r\n        let sum = 0;\r\n        let userVote = null;\r\n        let username = localStorage.getItem(\"username\");\r\n        data.forEach((doc) => {\r\n          sum += doc.data().voto;\r\n          if (doc.data().username === username) {\r\n            userVote = doc.data().voto;\r\n          }\r\n        });\r\n        return {\r\n          totalCount: data.size,\r\n          userVote: userVote,\r\n          average: data.size === 0 ? 3 : sum / data.size\r\n        };\r\n      });\r\n  }\r\n};\r\n\r\n"]}]}