{"remainingRequest":"C:\\Users\\Utente\\Documents\\Università_\\INFO2\\ProgettoInfo2\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Utente\\Documents\\Università_\\INFO2\\ProgettoInfo2\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\Utente\\Documents\\Università_\\INFO2\\ProgettoInfo2\\src\\dataservice.js","dependencies":[{"path":"C:\\Users\\Utente\\Documents\\Università_\\INFO2\\ProgettoInfo2\\src\\dataservice.js","mtime":1642783605922},{"path":"C:\\Users\\Utente\\Documents\\Università_\\INFO2\\ProgettoInfo2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641768647009},{"path":"C:\\Users\\Utente\\Documents\\Università_\\INFO2\\ProgettoInfo2\\node_modules\\babel-loader\\lib\\index.js","mtime":1641768664865},{"path":"C:\\Users\\Utente\\Documents\\Università_\\INFO2\\ProgettoInfo2\\node_modules\\eslint-loader\\index.js","mtime":1641768650585}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gIkBmaXJlYmFzZS9hcHAiOwppbXBvcnQgIkBmaXJlYmFzZS9maXJlc3RvcmUiOyAvLyBGaXJlYmFzZSBhbmNvcmEgbm9uIHV0aWxpenphdG8KCmZpcmViYXNlLmluaXRpYWxpemVBcHAoewogIGFwaUtleTogIkFJemFTeUFnaFl2cml6dVI3b0JTTE1LOUFPWmxxXzd5YV9oYVlGUSIsCiAgYXV0aERvbWFpbjogImluZm9ybWF0aWNhMi0zMTE3My5maXJlYmFzZWFwcC5jb20iLAogIHByb2plY3RJZDogImluZm9ybWF0aWNhMi0zMTE3MyIKfSk7CnZhciBkYiA9IGZpcmViYXNlLmZpcmVzdG9yZSgpOwpleHBvcnQgZGVmYXVsdCB7CiAgLy9Mb2dpbiB0aGluZ3MgLS0tLS0tLS0tLS0tCiAgaXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gISFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcm5hbWUiKTsKICB9LAogIGxvZ2luOiBmdW5jdGlvbiAodXNlcm5hbWUpIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VybmFtZSIsIHVzZXJuYW1lKTsKICB9LAogIGxvZ291dDogZnVuY3Rpb24gKCkgewogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInVzZXJuYW1lIik7CiAgfSwKICAvLyBOb24gbWkgbGVnZ2UgaWwgcHZhbHVlIC0tPiBpbiBMSVNULCAKICBnZXRQZW9wbGU6IGZ1bmN0aW9uIChwdmFsdWUpIHsKICAgIHJldHVybiBheGlvcy5nZXQoImh0dHBzOi8vc3dhcGkuZGV2L2FwaS9wZW9wbGUvP3BhZ2U9IiArIHB2YWx1ZSk7CiAgfSwKICAvLyBRVUVTVE8gRlVOWklPTkEKICBnZXRQZXJzb246IGZ1bmN0aW9uIChpZCkgewogICAgcmV0dXJuIGF4aW9zLmdldCgiaHR0cHM6Ly9zd2FwaS5kZXYvYXBpL3Blb3BsZS8iICsgaWQgKyAiLyIpOwogIH0sCiAgLy8gU2VhcmNoIG5vbiBmdW56aW9uYSAtIHF1ZXN0byDDqCBjb3BpYXRvIGRhbCBwcm9nZXR0byBkZWkgcHJvZgogIHNlYXJjaFBlcnNvbjogZnVuY3Rpb24gKHRlcm0pIHsKICAgIGlmICghdGVybSB8fCB0ZXJtLmxlbmd0aCA8IDMpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgIHJlc29sdmUoW10pOwogICAgICB9KTsKICAgIH0KICB9LAogIC8vQ29zZSBwZXIgbWV0dGVyZSB2b3RvIGEgcGVyc29uYWdnaSBzdGFyIHdhcnMKICB2b3RlOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHsKICAgIHJldHVybiBkYi5jb2xsZWN0aW9uKCJ2b3RpIikuZG9jKCkuc2V0KHsKICAgICAgdm90bzogdmFsdWUsCiAgICAgIHBva2Vtb246IG5hbWUsCiAgICAgIHVzZXJuYW1lOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcm5hbWUiKQogICAgfSk7CiAgfSwKICBnZXRTdGF0czogZnVuY3Rpb24gKG5hbWUpIHsKICAgIHJldHVybiBkYi5jb2xsZWN0aW9uKCJ2b3RpIikud2hlcmUoInBva2Vtb24iLCAiPT0iLCBuYW1lKS5nZXQoKS50aGVuKGRhdGEgPT4gewogICAgICBsZXQgc3VtID0gMDsKICAgICAgbGV0IHVzZXJWb3RlID0gbnVsbDsKICAgICAgbGV0IHVzZXJuYW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJuYW1lIik7CiAgICAgIGRhdGEuZm9yRWFjaChkb2MgPT4gewogICAgICAgIHN1bSArPSBkb2MuZGF0YSgpLnZvdG87CgogICAgICAgIGlmIChkb2MuZGF0YSgpLnVzZXJuYW1lID09PSB1c2VybmFtZSkgewogICAgICAgICAgdXNlclZvdGUgPSBkb2MuZGF0YSgpLnZvdG87CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHsKICAgICAgICB0b3RhbENvdW50OiBkYXRhLnNpemUsCiAgICAgICAgdXNlclZvdGU6IHVzZXJWb3RlLAogICAgICAgIGF2ZXJhZ2U6IGRhdGEuc2l6ZSA9PT0gMCA/IDAgOiBzdW0gLyBkYXRhLnNpemUKICAgICAgfTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["C:/Users/Utente/Documents/Università_/INFO2/ProgettoInfo2/src/dataservice.js"],"names":["axios","firebase","initializeApp","apiKey","authDomain","projectId","db","firestore","isAuthenticated","localStorage","getItem","login","username","setItem","logout","removeItem","getPeople","pvalue","get","getPerson","id","searchPerson","term","length","Promise","resolve","vote","name","value","collection","doc","set","voto","pokemon","getStats","where","then","data","sum","userVote","forEach","totalCount","size","average"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,eAArB;AACA,OAAO,qBAAP,C,CAEA;;AACAA,QAAQ,CAACC,aAAT,CAAuB;AACrBC,EAAAA,MAAM,EAAE,yCADa;AAErBC,EAAAA,UAAU,EAAE,oCAFS;AAGrBC,EAAAA,SAAS,EAAE;AAHU,CAAvB;AAMA,IAAIC,EAAE,GAAGL,QAAQ,CAACM,SAAT,EAAT;AAEE,eAAe;AACjB;AACIC,EAAAA,eAAe,EAAE,YAAY;AAC3B,WAAO,CAAC,CAACC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAT;AACD,GAJY;AAKbC,EAAAA,KAAK,EAAE,UAAUC,QAAV,EAAoB;AACzBH,IAAAA,YAAY,CAACI,OAAb,CAAqB,UAArB,EAAiCD,QAAjC;AACD,GAPY;AAQbE,EAAAA,MAAM,EAAE,YAAY;AAClBL,IAAAA,YAAY,CAACM,UAAb,CAAwB,UAAxB;AACD,GAVY;AAWjB;AACIC,EAAAA,SAAS,EAAE,UAAUC,MAAV,EAAkB;AAC3B,WAAOjB,KAAK,CAACkB,GAAN,CAAU,wCAAwCD,MAAlD,CAAP;AAED,GAfY;AAgBjB;AACIE,EAAAA,SAAS,EAAE,UAAUC,EAAV,EAAc;AACvB,WAAOpB,KAAK,CAACkB,GAAN,CAAU,kCAAkCE,EAAlC,GAAuC,GAAjD,CAAP;AACD,GAnBY;AAoBjB;AACIC,EAAAA,YAAY,EAAE,UAAUC,IAAV,EAAgB;AAC9B,QAAI,CAACA,IAAD,IAASA,IAAI,CAACC,MAAL,GAAc,CAA3B,EAA8B;AAC5B,aAAO,IAAIC,OAAJ,CAAaC,OAAD,IAAa;AAC9BA,QAAAA,OAAO,CAAC,EAAD,CAAP;AACD,OAFM,CAAP;AAGD;AACA,GA3BY;AA4BjB;AACEC,EAAAA,IAAI,EAAE,UAAUC,IAAV,EAAgBC,KAAhB,EAAuB;AAC3B,WAAOtB,EAAE,CACNuB,UADI,CACO,MADP,EAEJC,GAFI,GAGJC,GAHI,CAGA;AACHC,MAAAA,IAAI,EAAEJ,KADH;AAEHK,MAAAA,OAAO,EAAEN,IAFN;AAGHf,MAAAA,QAAQ,EAAEH,YAAY,CAACC,OAAb,CAAqB,UAArB;AAHP,KAHA,CAAP;AAQD,GAtCc;AAuCfwB,EAAAA,QAAQ,EAAE,UAAUP,IAAV,EAAgB;AACxB,WAAOrB,EAAE,CACNuB,UADI,CACO,MADP,EAEJM,KAFI,CAEE,SAFF,EAEa,IAFb,EAEmBR,IAFnB,EAGJT,GAHI,GAIJkB,IAJI,CAIEC,IAAD,IAAU;AACd,UAAIC,GAAG,GAAG,CAAV;AACA,UAAIC,QAAQ,GAAG,IAAf;AACA,UAAI3B,QAAQ,GAAGH,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAf;AACA2B,MAAAA,IAAI,CAACG,OAAL,CAAcV,GAAD,IAAS;AACpBQ,QAAAA,GAAG,IAAIR,GAAG,CAACO,IAAJ,GAAWL,IAAlB;;AACA,YAAIF,GAAG,CAACO,IAAJ,GAAWzB,QAAX,KAAwBA,QAA5B,EAAsC;AACpC2B,UAAAA,QAAQ,GAAGT,GAAG,CAACO,IAAJ,GAAWL,IAAtB;AACD;AACF,OALD;AAMA,aAAO;AACLS,QAAAA,UAAU,EAAEJ,IAAI,CAACK,IADZ;AAELH,QAAAA,QAAQ,EAAEA,QAFL;AAGLI,QAAAA,OAAO,EAAEN,IAAI,CAACK,IAAL,KAAc,CAAd,GAAkB,CAAlB,GAAsBJ,GAAG,GAAGD,IAAI,CAACK;AAHrC,OAAP;AAKD,KAnBI,CAAP;AAoBD;AA5Dc,CAAf","sourcesContent":["import axios from \"axios\";\r\nimport firebase from \"@firebase/app\";\r\nimport \"@firebase/firestore\";\r\n\r\n// Firebase ancora non utilizzato\r\nfirebase.initializeApp({\r\n  apiKey: \"AIzaSyAghYvrizuR7oBSLMK9AOZlq_7ya_haYFQ\",\r\n  authDomain: \"informatica2-31173.firebaseapp.com\",\r\n  projectId: \"informatica2-31173\"\r\n});\r\n\r\nvar db = firebase.firestore();\r\n\r\n  export default {\r\n//Login things ------------\r\n    isAuthenticated: function () {\r\n      return !!localStorage.getItem(\"username\");\r\n    },\r\n    login: function (username) {\r\n      localStorage.setItem(\"username\", username);\r\n    },\r\n    logout: function () {\r\n      localStorage.removeItem(\"username\");\r\n    },\r\n// Non mi legge il pvalue --> in LIST, \r\n    getPeople: function (pvalue) {\r\n      return axios.get(\"https://swapi.dev/api/people/?page=\" + pvalue\r\n      );\r\n    },\r\n// QUESTO FUNZIONA\r\n    getPerson: function (id) {\r\n      return axios.get(\"https://swapi.dev/api/people/\" + id + \"/\");\r\n    },\r\n// Search non funziona - questo è copiato dal progetto dei prof\r\n    searchPerson: function (term) {\r\n    if (!term || term.length < 3) {\r\n      return new Promise((resolve) => {\r\n        resolve([]);\r\n      });\r\n    }\r\n    },\r\n//Cose per mettere voto a personaggi star wars\r\n  vote: function (name, value) {\r\n    return db\r\n      .collection(\"voti\")\r\n      .doc()\r\n      .set({\r\n        voto: value,\r\n        pokemon: name,\r\n        username: localStorage.getItem(\"username\")\r\n      });\r\n  },\r\n  getStats: function (name) {\r\n    return db\r\n      .collection(\"voti\")\r\n      .where(\"pokemon\", \"==\", name)\r\n      .get()\r\n      .then((data) => {\r\n        let sum = 0;\r\n        let userVote = null;\r\n        let username = localStorage.getItem(\"username\");\r\n        data.forEach((doc) => {\r\n          sum += doc.data().voto;\r\n          if (doc.data().username === username) {\r\n            userVote = doc.data().voto;\r\n          }\r\n        });\r\n        return {\r\n          totalCount: data.size,\r\n          userVote: userVote,\r\n          average: data.size === 0 ? 0 : sum / data.size\r\n        };\r\n      });\r\n  }\r\n};\r\n\r\n"]}]}