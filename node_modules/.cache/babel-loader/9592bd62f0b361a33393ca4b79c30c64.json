{"remainingRequest":"C:\\Users\\Utente\\Documents\\Università_\\INFO2\\ProgettoInfo2\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Utente\\Documents\\Università_\\INFO2\\ProgettoInfo2\\node_modules\\eslint-loader\\index.js??ref--14-0!C:\\Users\\Utente\\Documents\\Università_\\INFO2\\ProgettoInfo2\\src\\dataservice.js","dependencies":[{"path":"C:\\Users\\Utente\\Documents\\Università_\\INFO2\\ProgettoInfo2\\src\\dataservice.js","mtime":1642025692530},{"path":"C:\\Users\\Utente\\Documents\\Università_\\INFO2\\ProgettoInfo2\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1641768647009},{"path":"C:\\Users\\Utente\\Documents\\Università_\\INFO2\\ProgettoInfo2\\node_modules\\babel-loader\\lib\\index.js","mtime":1641768664865},{"path":"C:\\Users\\Utente\\Documents\\Università_\\INFO2\\ProgettoInfo2\\node_modules\\eslint-loader\\index.js","mtime":1641768650585}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IGZpcmViYXNlIGZyb20gIkBmaXJlYmFzZS9hcHAiOwppbXBvcnQgIkBmaXJlYmFzZS9maXJlc3RvcmUiOyAvLyBGaXJlYmFzZSBhbmNvcmEgbm9uIHV0aWxpenphdG8KCmZpcmViYXNlLmluaXRpYWxpemVBcHAoewogIGFwaUtleTogIkFJemFTeUFnaFl2cml6dVI3b0JTTE1LOUFPWmxxXzd5YV9oYVlGUSIsCiAgYXV0aERvbWFpbjogImluZm9ybWF0aWNhMi0zMTE3My5maXJlYmFzZWFwcC5jb20iLAogIHByb2plY3RJZDogImluZm9ybWF0aWNhMi0zMTE3MyIKfSk7CnZhciBkYiA9IGZpcmViYXNlLmZpcmVzdG9yZSgpOwpleHBvcnQgZGVmYXVsdCB7CiAgLy9Mb2dpbiB0aGluZ3MgLS0tLS0tLS0tLS0tCiAgaXNBdXRoZW50aWNhdGVkOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gISFsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcm5hbWUiKTsKICB9LAogIGxvZ2luOiBmdW5jdGlvbiAodXNlcm5hbWUpIHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ1c2VybmFtZSIsIHVzZXJuYW1lKTsKICB9LAogIGxvZ291dDogZnVuY3Rpb24gKCkgewogICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oInVzZXJuYW1lIik7CiAgfSwKICAvLyBTZXJ2ZSB2YWxvcmUgZGVsbGEgcGFnaW5hIChjaGUgZG92cmViYmUgZXNzZXJlIGRhdG8gZGFsbGEgcGFnaW5hemlvbmUpIG5vbiBzbyBjb21lIGZhcmUKICBnZXRQZW9wbGU6IGZ1bmN0aW9uIChwYWdlKSB7CiAgICByZXR1cm4gYXhpb3MuZ2V0KCJodHRwczovL3N3YXBpLmRldi9hcGkvcGVvcGxlLz9wYWdlPSIgKyBwYWdlKTsKICB9LAogIC8vIENvbWUgZmFjY2lvIGFkIGF2ZXJlIDppZD8KICBnZXRQZXJzb246IGZ1bmN0aW9uIChpZCkgewogICAgcmV0dXJuIGF4aW9zLmdldCgiaHR0cHM6Ly9zd2FwaS5kZXYvYXBpL3Blb3BsZS8iICsgaWQpOwogIH0sCiAgLy8gU2VhcmNoIG5vbiBmdW56aW9uYSAtIHF1ZXN0byDDqCBjb3BpYXRvIGRhbCBwcm9nZXR0byBkZWkgcHJvZgogIHNlYXJjaFBlcnNvbjogZnVuY3Rpb24gKHRlcm0pIHsKICAgIGlmICghdGVybSB8fCB0ZXJtLmxlbmd0aCA8IDMpIHsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgICAgIHJlc29sdmUoW10pOwogICAgICB9KTsKICAgIH0gLy8gUXVlc3RvIG5vbiBmdW56aW9uYSAtIFNXQVBJIHJhZ2lvbmEgcGVyIHBhZ2luZSBnacOgIGRpdmlzZToKICAgIC8vIGhhIGNvbWUgYXR0cmlidXRpIAkibmV4dCI6ICJodHRwczovL3N3YXBpLmRldi9hcGkvcGVvcGxlLz9wYWdlPTIiLCBlICJwcmV2aW91cyIuLgoKCiAgICByZXR1cm4gYXhpb3MuZ2V0KCJodHRwczovL3N3YXBpLmRldi9hcGkvcGVvcGxlLz9wYWdlPSIpLnRoZW4oZGF0YSA9PiB7CiAgICAgIHZhciByZXN1bHQgPSBbXTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGF0YS5kYXRhLnJlc3VsdHMubGVuZ3RoOyBpKyspIHsKICAgICAgICB2YXIgcGVyc29uID0gZGF0YS5kYXRhLnJlc3VsdHNbaV07CiAgICAgICAgdmFyIG5hbWUgPSBwZXJzb24ubmFtZTsKCiAgICAgICAgaWYgKG5hbWUuaW5kZXhPZih0ZXJtKSA+PSAwKSB7CiAgICAgICAgICByZXN1bHQucHVzaChuYW1lKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiByZXN1bHQ7CiAgICB9KTsKICB9LAogIC8vQ29zZSBwZXIgbWV0dGVyZSB2b3RvIGEgcGVyc29uYWdnaSBzdGFyIHdhcnMKICB2b3RlOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHsKICAgIHJldHVybiBkYi5jb2xsZWN0aW9uKCJ2b3RpIikuZG9jKCkuc2V0KHsKICAgICAgdm90bzogdmFsdWUsCiAgICAgIHBva2Vtb246IG5hbWUsCiAgICAgIHVzZXJuYW1lOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlcm5hbWUiKQogICAgfSk7CiAgfSwKICBnZXRTdGF0czogZnVuY3Rpb24gKG5hbWUpIHsKICAgIHJldHVybiBkYi5jb2xsZWN0aW9uKCJ2b3RpIikud2hlcmUoInBva2Vtb24iLCAiPT0iLCBuYW1lKS5nZXQoKS50aGVuKGRhdGEgPT4gewogICAgICBsZXQgc3VtID0gMDsKICAgICAgbGV0IHVzZXJWb3RlID0gbnVsbDsKICAgICAgbGV0IHVzZXJuYW1lID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJuYW1lIik7CiAgICAgIGRhdGEuZm9yRWFjaChkb2MgPT4gewogICAgICAgIHN1bSArPSBkb2MuZGF0YSgpLnZvdG87CgogICAgICAgIGlmIChkb2MuZGF0YSgpLnVzZXJuYW1lID09PSB1c2VybmFtZSkgewogICAgICAgICAgdXNlclZvdGUgPSBkb2MuZGF0YSgpLnZvdG87CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHsKICAgICAgICB0b3RhbENvdW50OiBkYXRhLnNpemUsCiAgICAgICAgdXNlclZvdGU6IHVzZXJWb3RlLAogICAgICAgIGF2ZXJhZ2U6IGRhdGEuc2l6ZSA9PT0gMCA/IDAgOiBzdW0gLyBkYXRhLnNpemUKICAgICAgfTsKICAgIH0pOwogIH0KfTs="},{"version":3,"sources":["C:/Users/Utente/Documents/Università_/INFO2/ProgettoInfo2/src/dataservice.js"],"names":["axios","firebase","initializeApp","apiKey","authDomain","projectId","db","firestore","isAuthenticated","localStorage","getItem","login","username","setItem","logout","removeItem","getPeople","page","get","getPerson","id","searchPerson","term","length","Promise","resolve","then","data","result","i","results","person","name","indexOf","push","vote","value","collection","doc","set","voto","pokemon","getStats","where","sum","userVote","forEach","totalCount","size","average"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport firebase from \"@firebase/app\";\r\nimport \"@firebase/firestore\";\r\n\r\n// Firebase ancora non utilizzato\r\nfirebase.initializeApp({\r\n  apiKey: \"AIzaSyAghYvrizuR7oBSLMK9AOZlq_7ya_haYFQ\",\r\n  authDomain: \"informatica2-31173.firebaseapp.com\",\r\n  projectId: \"informatica2-31173\"\r\n});\r\n\r\nvar db = firebase.firestore();\r\n\r\n  export default {\r\n//Login things ------------\r\n    isAuthenticated: function () {\r\n      return !!localStorage.getItem(\"username\");\r\n    },\r\n    login: function (username) {\r\n      localStorage.setItem(\"username\", username);\r\n    },\r\n    logout: function () {\r\n      localStorage.removeItem(\"username\");\r\n    },\r\n// Serve valore della pagina (che dovrebbe essere dato dalla paginazione) non so come fare\r\n    getPeople: function (page) {\r\n      return axios.get(\"https://swapi.dev/api/people/?page=\" + page\r\n      );\r\n    },\r\n// Come faccio ad avere :id?\r\n    getPerson: function (id) {\r\n      return axios.get(\"https://swapi.dev/api/people/\" + id );\r\n    },\r\n// Search non funziona - questo è copiato dal progetto dei prof\r\n    searchPerson: function (term) {\r\n    if (!term || term.length < 3) {\r\n      return new Promise((resolve) => {\r\n        resolve([]);\r\n      });\r\n    }\r\n// Questo non funziona - SWAPI ragiona per pagine già divise:\r\n// ha come attributi \t\"next\": \"https://swapi.dev/api/people/?page=2\", e \"previous\"..\r\n    return axios\r\n      .get(\"https://swapi.dev/api/people/?page=\" )\r\n      .then((data) => {\r\n        var result = [];\r\n        for (var i = 0; i < data.data.results.length; i++) {\r\n          var person = data.data.results[i];\r\n          var name = person.name;\r\n          if (name.indexOf(term) >= 0) {\r\n            result.push(name);\r\n          }\r\n        }\r\n        return result;\r\n      });\r\n    },\r\n//Cose per mettere voto a personaggi star wars\r\n  vote: function (name, value) {\r\n    return db\r\n      .collection(\"voti\")\r\n      .doc()\r\n      .set({\r\n        voto: value,\r\n        pokemon: name,\r\n        username: localStorage.getItem(\"username\")\r\n      });\r\n  },\r\n  getStats: function (name) {\r\n    return db\r\n      .collection(\"voti\")\r\n      .where(\"pokemon\", \"==\", name)\r\n      .get()\r\n      .then((data) => {\r\n        let sum = 0;\r\n        let userVote = null;\r\n        let username = localStorage.getItem(\"username\");\r\n        data.forEach((doc) => {\r\n          sum += doc.data().voto;\r\n          if (doc.data().username === username) {\r\n            userVote = doc.data().voto;\r\n          }\r\n        });\r\n        return {\r\n          totalCount: data.size,\r\n          userVote: userVote,\r\n          average: data.size === 0 ? 0 : sum / data.size\r\n        };\r\n      });\r\n  }\r\n};\r\n\r\n"]}]}